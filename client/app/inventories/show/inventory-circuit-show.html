
<div class="app-body-content  app-body-with-toolbar">
  <div class="app-toolbar">
    <div class="btn-group">
      <h4>{{$lcmaPage.getTitle()}}</h4>
    </div>
  </div>

  <div class="app-data app-data-space inventory-facepage">

    <div class="panel panel-default">
      <form name="InventoryForm" class="form-horizontal">
        <div class="panel-heading clearfix">
          <h2>
            Ckt Detail Vendor: <span>{{ctx.inventory.vendor.name}}</span>,
            Ckd ID: <span>{{ctx.inventory.sp_id}}</span>
          </h2>
        </div>
        <div class="panel-body">
          <div class="row mar-b">
            <div class="col-sm-12 text-center">
              <div class="btn-group panel-ctrls">
                <button ng-click="ctx.editInventory()"
                        class="btn btn-default" ng-class="{'active': ctx.editing}">
                  Edit
                </button>
                <button ng-click="ctx.saveInventory(InventoryForm)"
                        class="btn btn-default">
                  Save
                </button>
              </div>

              <div class="btn-group panel-ctrls">
                <button class="btn btn-default">
                  Change
                </button>
                <button class="btn btn-default">
                  Disconnect
                </button>
              </div>

              <div class="btn-group panel-ctrls">
                <button ng-click="ctx.editContract()"
                        class="btn btn-primary">
                   Add Note
                </button>
                <button ng-click="ctx.editContract()"
                        class="btn btn-primary">
                  < Add Alias
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading clearfix">
            <h2>Circuit Info
            </h2>
          </div>
          <div class="panel-body">
            <div class="row mar-b">
              <div class="col-sm-1">
                Int Ckt ID
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="int_ckt_id" ng-model="ctx.inventory.int_ckt_id" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                SP Ckt ID
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="sp_ckt_id" ng-model="ctx.inventory.sp_ckt_id" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                Vendor
              </div>
              <div class="col-sm-2">
                <lcma-vendor-picker ng-model="ctx.inventory.vendor_id" ng-disabled="!ctx.editing"></lcma-vendor-picker>
              </div>
              <div class="col-sm-1">
                BAN
              </div>
              <div class="col-sm-2">
                <input name="ban" ng-model="ctx.inventory.ban" type="text"
                       class="form-control text-right" readonly>
              </div>

            </div>
            <div class="row mar-t">
              <div class="col-sm-1">
                Status
              </div>
              <div class="col-sm-2">
                <lcma-dictionary-picker type-key='inventory-status' name="status" ng-model="ctx.inventory.status_id" ng-disabled="!ctx.editing"></lcma-dictionary-picker>
              </div>
              <div class="col-sm-1">
                Client
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="client" ng-model="ctx.inventory.client" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                Topology
              </div>
              <div class="col-sm-2">
                <lcma-dictionary-picker type-key='inventory-topology' name="topology" ng-model="ctx.inventory.topology_id" ng-disabled="!ctx.editing"></lcma-dictionary-picker>
              </div>
              <div class="col-sm-1">
                Ckt Type
              </div>
              <div class="col-sm-2">
                <lcma-dictionary-picker type-key='inventory-ckt-type' name="ckt_type" ng-model="ctx.inventory.ckt_type_id" ng-disabled="!ctx.editing"></lcma-dictionary-picker>
              </div>
            </div>

            <div class="row mar-t">
              <div class="col-sm-1">
                Technology
              </div>
              <div class="col-sm-2">
                <lcma-dictionary-picker type-key='inventory-technology' name="technology" ng-model="ctx.inventory.technology_id" ng-disabled="!ctx.editing"></lcma-dictionary-picker>
              </div>
              <div class="col-sm-1">
                CIR BW
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="cir_bw" ng-model="ctx.inventory.cir_bw" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                BW Max
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="bw_max" ng-model="ctx.inventory.bw_max" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                BW Model
              </div>
              <div class="col-sm-2">
                <lcma-dictionary-picker type-key='inventory-bw-model' name="bw_model" ng-model="ctx.inventory.bw_model_id" ng-disabled="!ctx.editing"></lcma-dictionary-picker>
              </div>
            </div>

            <div class="row mar-t">
              <div class="col-sm-1">
                Ckt Usage
              </div>
              <div class="col-sm-2">
                <lcma-dictionary-picker type-key='inventory-ckt-usage' name="ckt_usage" ng-model="ctx.inventory.ckt_usage_id" ng-disabled="!ctx.editing"></lcma-dictionary-picker>
              </div>
              <div class="col-sm-1">
                Contract ID
              </div>
              <div class="col-sm-2">
                <select class="form-control" ng-options="contract.id as contract.name for contract in ctx.contracts"
                        ng-model="ctx.inventory.contract_id" ng-disabled="!ctx.editing"></select>
              </div>
              <div class="col-sm-1">
                Est. MRC
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="est_mrc" ng-model="ctx.inventory.est_mrc" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                Est. NRC
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="est_nrc" ng-model="ctx.inventory.est_nrc" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
            </div>
            <div class="row mar-t">
              <div class="col-sm-1">
                Term
              </div>
              <div class="col-sm-2">
                <input ng-required="true" name="term" ng-model="ctx.inventory.term" type="text"
                       class="form-control text-right" ng-readonly="!ctx.editing">
              </div>
              <div class="col-sm-1">
                Protected?
              </div>
              <div class="col-sm-2">
                <lcma-dictionary-picker type-key='inventory-protected' name="protected" ng-model="ctx.inventory.protected_id" ng-disabled="!ctx.editing"></lcma-dictionary-picker>
              </div>
              <div class="col-sm-1">
                Install Date
              </div>
              <div class="col-sm-2">
                <input
                  uib-datepicker-popup="MM/dd/yyyy"
                  ng-model="ctx.inventory.install_date"
                  name="install_date"
                  placeholder="Install Date"
                  init-date="{{ctx.inventory.install_date}}"
                  class="form-control input-sm text-right"
                  is-open="ctx.install_date_ui.opened"
                  ng-click="ctx.install_date_ui.opened=true"
                  ng-disabled="!ctx.editing"
                >
              </div>
              <div class="col-sm-1">
                Exp Date
              </div>
              <div class="col-sm-2">
                <input
                  uib-datepicker-popup="MM/dd/yyyy"
                  ng-model="ctx.inventory.exp_date"
                  name="exp_date"
                  placeholder="Exp Date"
                  init-date="{{ctx.inventory.exp_date}}"
                  class="form-control input-sm text-right"
                  is-open="ctx.exp_date_ui.opened"
                  ng-click="ctx.exp_date_ui.opened=true"
                  ng-disabled="!ctx.editing"
                >
              </div>
            </div>
            <div class="row mar-t">
              <div class="col-sm-1">
                Disc Date
              </div>
              <div class="col-sm-2">
                <input
                  uib-datepicker-popup="MM/dd/yyyy"
                  ng-model="ctx.inventory.disc_date"
                  name="disc_date"
                  placeholder="Disc Date"
                  init-date="{{ctx.inventory.disc_date}}"
                  class="form-control input-sm text-right"
                  is-open="ctx.disc_date_ui.opened"
                  ng-click="ctx.disc_date_ui.opened=true"
                  ng-disabled="!ctx.editing"
                >
              </div>
              <div class="col-sm-1">
                Prim/Failover
              </div>
              <div class="col-sm-2">
                <lcma-dictionary-picker type-key='inventory-prim-failover' name="prim_failover" ng-model="ctx.inventory.prim_failover_id" ng-disabled="!ctx.editing"></lcma-dictionary-picker>
              </div>
              <div class="col-sm-3">
                Foil Rel Ckt {{ctx.inventory.foil_rel_ckt}}
              </div>
              <div class="col-sm-3">

              </div>
            </div>
          </div>
        </div>
      </form>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading clearfix">
        <h2>Site Info</h2>
      </div>
      <div class="panel-body">
        <div class="row mar-b" ng-if="ctx.getTopology(ctx.inventory.topology_id).value =='Point to Point' ">
          <div class="col-sm-6">
            <div lcma-site-detail site-id="ctx.inventory.site_a_id" class="site-detail" editing="ctx.editing"/>
          </div>
          <div class="col-sm-6">
            <div lcma-site-detail site-id="ctx.inventory.site_z_id" class="site-detail" editing="ctx.editing"/>
          </div>
        </div>

        <div class="row mar-b" ng-if="ctx.getTopology(ctx.inventory.topology_id).value =='Ring' ">
          <div class=" clearfix">
            <button class="btn btn-default pull-right" ng-click="ctx.addDocument()">
              <i class="fa fa-plus"></i>
              Add
            </button>
          </div>
          <div ng-if="!ctx.inventory.sites.length">No sites defined.</div>
          <div ng-if="ctx.inventory.sites.length" class="grid" ui-grid="ctx.sitesGrid"></div>
        </div>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading clearfix">
        <h2>Related Info</h2>
      </div>
      <div class="panel-body">

        <uib-tabset>
          <uib-tab heading="Orders">

            <div class=" clearfix">
              <button class="btn btn-default pull-right" ng-click="ctx.addDocument()">
                <i class="fa fa-plus"></i>
                Add
              </button>
            </div>

            <div ng-if="!ctx.documents.length" class="empty-data">
              No documents added for this contract.
            </div>
            <div ng-if="ctx.documents.length" class="grid" ui-grid="ctx.documentsGrid"></div>
          </uib-tab>

          <uib-tab heading="Tickets">
          </uib-tab>

          <uib-tab heading="Billing">
          </uib-tab>

          <uib-tab heading="Aliases">
          </uib-tab>

          <uib-tab heading="Channels">
          </uib-tab>

          <uib-tab heading="GL Codes">

            <lcma-contract-history ng-model="ctx.history"></lcma-contract-history>
            <div class="text-center mar-all" ng-if="!ctx.history.length">No history logged for this contract.</div>
          </uib-tab>
          <uib-tab heading="Notes">

            <div class=" clearfix">
              <button type="button"
                      class="btn btn-default pull-right"
                      ng-click="ctx.addNote()" ng-disabled="!ctx.inventory.id">Add Note
              </button>
            </div>
            <div ng-repeat="note in ctx.notes"
                 class="mar-t"
                 id="note_{{note.id}}"
                 lcma-focus-on="note_{{note.id}}">

              <lcma-note-list ng-model="note" on-reply="ctx.onNoteReply(note)">

              </lcma-note-list>

            </div>

            <div class="text-center mar-all" ng-if="!ctx.notes.length">No notes added for this invoice.</div>
          </uib-tab>
          <uib-tab heading="History">

            <lcma-contract-history ng-model="ctx.history"></lcma-contract-history>
            <div class="text-center mar-all" ng-if="!ctx.history.length">No history logged for this contract.</div>
          </uib-tab>
        </uib-tabset>
      </div>
    </div>

    <br>
    <br>
    <br>
    <br>
    <br>

  </div>
</div>

